Проведение ручного тестирования методом черного ящика.

1. Регистрация пользователя
POST. `http://91.186.196.211:3000/api/auth/v1/registration`

1.1 Проверка на формат  email
```json
Payload
{
    "email": "dqwdqwd",
    "password": "",
    "firstName": "" 
}
```

**Ответ:**
```json
{
    "error": {
        "name": "ValidationError",
        "message": "Request validation failed",
        "code": "VALIDATION_ERROR",
        "details": [
            {
                "instancePath": "/email",
                "schemaPath": "#/properties/email/format",
                "keyword": "format",
                "params": {
                    "format": "email"
                },
                "message": "must match format \"email\""
            }
        ]
    }
}
```
Поведение правильное.


1.3 Проверка пароля, минимум 6 символов.
```json
Payload
{

    "email": "dqwdqwd@mail.ru",

    "password": "123",

    "firstName": "" 

}
```

**Ответ:**
```json
{
    "error": {
        "name": "ValidationError",
        "message": "Request validation failed",
        "code": "VALIDATION_ERROR",
        "details": [
            {
                "instancePath": "/password",
                "schemaPath": "#/properties/password/minLength",
                "keyword": "minLength",
                "params": {
                    "limit": 6
                },
                "message": "must NOT have fewer than 6 characters"
            }
        ]
    }
}
```
Поведение правильное.

1.4 Проверка уже созданного пользователя
```json
Payload
{
    "email": "dqwdqwd@mail.ru",

    "password": "123qwe22",

    "firstName": "Denzl" 
}
```

**Ответ:**
```json
{
    "error": {
        "name": "EntityAlreadyExistedError",
        "message": "User with email: dqwdqwd@mail.ru already exists",
        "code": "ENTITY_ALREADY_EXISTS",
        "details": {
            "entity": "User",
            "identifiers": {
                "email": "dqwdqwd@mail.ru"
            }
        }
    }
}
```
Поведение правильное

1.5 Проверка на регистрацию пользователя
```json
Payload
{
    "email": "drplot@mail.ru",

    "password": "123qwe22",

    "firstName": "Denzl" 
}
```

**Ответ:**
```json
{
    "data": {
        "user": {
            "guid": "4044bbde-3e54-478f-baa0-11a2b87115d7",
            "email": "drplot@mail.ru",
            "firstName": "Denzl",
            "lastName": null,
            "patronymicName": null,
            "phone": null,
            "country": null,
            "age": null,
            "clientGuid": null,
            "createdAt": "2025-12-06T21:20:18.674Z",
            "deletedAt": null,
            "updatedAt": "2025-12-06T21:20:18.674Z",
            "roles": [
                {
                    "id": 1,
                    "name": "Турист",
                    "keyWord": "tourist",
                    "clientGuid": null,
                    "createdAt": "2025-12-06T20:25:26.167Z",
                    "updatedAt": "2025-12-06T20:25:26.167Z"
                }
            ]
        },
        "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyR3VpZCI6IjQwNDRiYmRlLTNlNTQtNDc4Zi1iYWEwLTExYTJiODcxMTVkNyIsImlhdCI6MTc2NTA1NjAxOCwiZXhwIjoxNzY1NjYwODE4fQ.ZiXFmnBHkX-s_waB3LjC8rQ9i4ZiH46XTdzmRlwjFfc"
    }
}
```
Поведение правильное

---


2. Вход пользователя
`http://91.186.196.211:3000/api/auth/v1/login`

 При вводе неправильного email или пароля не содержащего 6 символов - поведение правильное.
 
2.1 Проверка авторизации пользователя
```json
Payload

{
    "email": "drplot@mail.ru",

    "password": "123qwe22"
}
```

**Ответ:**
```json
{
    "data": {
        "user": {
            "guid": "4044bbde-3e54-478f-baa0-11a2b87115d7",
            "email": "drplot@mail.ru",
            "firstName": "Denzl",
            "roles": [
                {
                    "id": 1,
                    "name": "Турист",
                    "keyWord": "tourist"
                }
            ],
            "createdAt": "2025-12-06T21:20:18.674Z",
            "updatedAt": "2025-12-06T21:20:18.674Z"
        },
        "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyR3VpZCI6IjQwNDRiYmRlLTNlNTQtNDc4Zi1iYWEwLTExYTJiODcxMTVkNyIsImlhdCI6MTc2NTA1NjY1MiwiZXhwIjoxNzY1NjYxNDUyfQ.GueZBRfSKBqxjdjFG5Nf6PMHzIowEPr7rWhVipPlTaw"
    }
}
```
Поведение правильное

---


3. Создание поездки
`http://91.186.196.211:3000/api/trips/v1`

3.1 Проверка создания поездки без указания поля name

```json
Payload

{
    "name": null,

    "goal": null,

    "budgetMin": "",

    "budgetMax": "",

    "cities": [{ 

        "address": "Москва, улица Пушкина 32",

        "visitDate": "2025-11-02",

        "description": "dadad",

        "latitude": 55.1234,

        "longitude": 37.2134
    }]
}
```

**Ответ:**
```json
{
    "error": {
        "name": "ValidationError",
        "message": "Request validation failed",
        "code": "VALIDATION_ERROR",
        "details": [
            {
                "instancePath": "/name",
                "schemaPath": "#/properties/name/minLength",
                "keyword": "minLength",
                "params": {
                    "limit": 1
                },
                "message": "must NOT have fewer than 1 characters"
            }
        ]
    }
}
```
Поведение правильное

3.2 Проверка создания поездки без указания поля cities

```json
Payload

{
    "name": "Поездка",

    "goal": "forSelf",

    "budgetMin": "",

    "budgetMax": "",

    "cities": null
}
```

**Ответ:**
```json
{
    "error": {
        "name": "ValidationError",
        "message": "Request validation failed",
        "code": "VALIDATION_ERROR",
        "details": [
            {
                "instancePath": "/cities/0",
                "schemaPath": "#/properties/cities/items/type",
                "keyword": "type",
                "params": {
                    "type": "object"
                },
                "message": "must be object"
            }
        ]
    }
}
```
Поведение правильное

3.3 Проверка формата даты

```json
Payload
{
    "name": "Поездка",

    "goal": "forSelf",

    "budgetMin": "",

    "budgetMax": "",

    "cities": [{ 

        "address": "Москва, улица Пушкина 32",

        "visitDate": "12-12-2025",

        "description": "dadad",

        "latitude": "55.1234",

        "longitude": "37.2134"
    }]
}
```

**Ответ:**
```json
{
    "error": {
        "name": "ValidationError",
        "message": "Request validation failed",
        "code": "VALIDATION_ERROR",
        "details": [
            {
                "instancePath": "/cities/0/visitDate",
                "schemaPath": "#/properties/cities/items/properties/visitDate/format",
                "keyword": "format",
                "params": {
                    "format": "date"
                },
                "message": "must match format \"date\""
            }
        ]
    }
}
```
Поведение правильное

3.4 Проверка обязательного ввода координат

```json
Payload
{
    "name": "Поездка",

    "goal": "forSelf",

    "budgetMin": "",

    "budgetMax": "",

    "cities": [{ 

        "address": "Москва, улица Пушкина 32",

        "visitDate": "2025-11-02",

        "description": "dadad",

        "latitude": "",

        "longitude": ""
    }]
}
```

**Ответ:**
```json
{
    "error": {
        "name": "ValidationError",
        "message": "Request validation failed",
        "code": "VALIDATION_ERROR",
        "details": [
            {
                "instancePath": "/cities/0/latitude",
                "schemaPath": "#/properties/cities/items/properties/latitude/type",
                "keyword": "type",
                "params": {
                    "type": "number"
                },
                "message": "must be number"
            }
        ]
    }
}
```
Поведение правильное

3.5 Проверка обязательного ввода адреса

```json
Payload

{
    "name": "Поездка",

    "goal": "forSelf",

    "budgetMin": "",

    "budgetMax": "",

    "cities": [{ 

        "address": "",

        "visitDate": "2025-11-02",

        "description": "dadad",

        "latitude": 55.1234,

        "longitude": 37.2134
    }]
}
```

**Ответ:**
```
{
    "error": {
        "name": "ValidationError",
        "message": "Request validation failed",
        "code": "VALIDATION_ERROR",
        "details": [
            {
                "instancePath": "/cities/0/address",
                "schemaPath": "#/properties/cities/items/properties/address/minLength",
                "keyword": "minLength",
                "params": {
                    "limit": 1
                },
                "message": "must NOT have fewer than 1 characters"
            }
        ]
    }
}
```
Поведение правильное

3.6 Проверка создания поездки

Payload

```json
{
    "name": "Тур",

    "goal": "forSelf",

    "budgetMin": "10",

    "budgetMax": "5000",

    "cities": [{ 

        "address": "Москва, ул. Калатушкина 12",

        "visitDate": "2025-12-02",

        "description": "dadad",

        "latitude": 55.1234,

        "longitude": 37.2134
    }]
}
```

**Ответ:**
```json
{
    "data": {
        "trip": {
            "guid": "c51d469f-7a7e-42c8-8933-fa1c0ff7ca7c",
            "name": "Тур",
            "goal": "forSelf",
            "status": "planned",
            "budgetMin": "10.00",
            "budgetMax": "5000.00",
            "removalMark": false,
            "createdAt": "2025-12-06T23:42:59.654Z",
            "updatedAt": "2025-12-06T23:42:59.654Z",
            "waypoints": [
                {
                    "guid": "b88734a2-3a8b-4aed-83d9-56abc358751b",
                    "tripGuid": "c51d469f-7a7e-42c8-8933-fa1c0ff7ca7c",
                    "parentGuid": null,
                    "type": "city",
                    "address": "Москва, ул. Калатушкина 12",
                    "orderIndex": 0,
                    "visitDate": "2025-12-02",
                    "description": "dadad",
                    "latitude": "55.12340000",
                    "longitude": "37.21340000"
                }
            ]
        }
    }
}
```
Поведение правильное

---

4. Обновление пользователя
`http://91.186.196.211:3000/api/users/v1/me`

4.1 Проверка на корректность email
```json
Payload

{
    "email": "dragmai"
}
```

**Ответ:**
```json
{
    "error": {
        "name": "ValidationError",
        "message": "Request validation failed",
        "code": "VALIDATION_ERROR",
        "details": [
            {
                "instancePath": "/email",
                "schemaPath": "#/properties/email/format",
                "keyword": "format",
                "params": {
                    "format": "email"
                },
                "message": "must match format \"email\""
            }
        ]
    }
}
```
Поведение правильное

4.2 Проверка на обновление всех полей пользователя (кроме пароля)
```json
Payload

{
    "email": "drag11@mail.ru",
    "firstName": "Danil",
    "lastName": "Plor",
    "patronymicName": "Romanich",
    "phone": "788798",
    "country": "Россия",
    "age": 22
}
```

**Ответ:**
```json
{
    "data": {
        "guid": "4044bbde-3e54-478f-baa0-11a2b87115d7",
        "email": "drag11@mail.ru",
        "firstName": "Danil",
        "lastName": "Plor",
        "patronymicName": "Romanich",
        "phone": "788798",
        "country": "Россия",
        "age": 22,
        "clientGuid": null,
        "createdAt": "2025-12-06T21:20:18.674Z",
        "updatedAt": "2025-12-07T00:07:51.070Z",
        "roles": [
            {
                "id": 1,
                "name": "Турист",
                "keyWord": "tourist",
                "createdAt": "2025-12-06T20:25:26.167Z",
                "updatedAt": "2025-12-06T20:25:26.167Z"
            }
        ]
    }
}
```
Поведение правильное

---

5. Создание клиента (организации)
`http://91.186.196.211:3000/api/clients/v1/register`

5.1 Проверка создания клиента
Payload

```json
{
    "name": "Romana"
}
```

**Ответ:**
```json
{
    "data": {
        "client": {
            "guid": "46081b74-3448-4ed0-98da-75830bf8942a",
            "removalMark": false,
            "id": 9,
            "name": "Romana",
            "apiKey": "2f35eaa52bcf8d0f343a3e54c8422ba9a26369ee1e3982b90df93acabd2ece9e",
            "updatedAt": "2025-12-07T00:29:01.197Z",
            "createdAt": "2025-12-07T00:29:01.197Z"
        }
    }
}
```
Поведение правильное

---

6. Создание пользователя для клиента с целью получения jwt токена
POST. `http://91.186.196.211:3000/api/clients/v1/users`
email и password работают исправно

  6.1 Создание пользователя для клиента
  
Payload
```json
{
    "email": "test123@mail.ru",

    "password": "123qwwe",

    "firstName": "Sanek",

    "lastName": "Plot",

    "patronymicName": "Romch",

    "phone": "121244",

    "country": "Россия",

    "age": 22,

    "roleKeyWord": "clientAdmin"
}
```

**Ответ:**
```json
{
    "data": {
        "user": {
            "guid": "0f9802a0-902c-4058-a9bd-81d2b76bb5d4",
            "email": "test123@mail.ru",
            "firstName": "Sanek",
            "lastName": "Plot",
            "patronymicName": "Romch",
            "phone": "121244",
            "country": "Россия",
            "age": 22,
            "clientGuid": "1d73de89-bf34-4788-a067-718292cf73ec",
            "createdAt": "2025-12-07T05:00:04.851Z",
            "deletedAt": null,
            "updatedAt": "2025-12-07T05:00:04.851Z",
            "roles": [
                {
                    "id": 18,
                    "name": "Администратор организации",
                    "keyWord": "clientAdmin",
                    "clientGuid": "1d73de89-bf34-4788-a067-718292cf73ec",
                    "createdAt": "2025-12-07T04:33:58.629Z",
                    "updatedAt": "2025-12-07T04:33:58.629Z"
                }
            ]
        },
        "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyR3VpZCI6IjBmOTgwMmEwLTkwMmMtNDA1OC1hOWJkLTgxZDJiNzZiYjVkNCIsImlhdCI6MTc2NTA4MzYwNCwiZXhwIjoxNzY1Njg4NDA0fQ.3v0cTDy32KuPGgtZxEqEr6nG8DcFcufckX3YAO3j7dk"
    }
}
```
Поведение правильное

---

7. Создание магазина
POST. `http://91.186.196.211:3000/api/clients/v1/shops`

7.1 Проверка минимальной длины названия магазина

Payload
```json
{
    "shops": [{

        "name": "",

        "address": "Калатушкина 13",

        "city": "Москва",

        "region": "Московская область",

        "schedule": {"Пн-пт": "8:00-17:00"},

        "latitude": 53.234,

        "longitude": 13.211
    }]
}
```

**Ответ:**
```json
{
    "error": {
        "name": "ValidationError",
        "message": "Request validation failed",
        "code": "VALIDATION_ERROR",
        "details": [
            {
                "instancePath": "/shops/0/name",
                "schemaPath": "#/properties/shops/items/properties/name/minLength",
                "keyword": "minLength",
                "params": {
                    "limit": 1
                },
                "message": "must NOT have fewer than 1 characters"
            }
        ]
    }
}
```
Поведение правильное

7.2 Проверка минимальной длины адреса магазина

Payload
```json
{
    "shops": [{

        "name": "Ювелирка",

        "address": "",

        "city": "Москва",

        "region": "Московская область",

        "schedule": {"Пн-пт": "8:00-17:00"},

        "latitude": 53.234,

        "longitude": 13.211
    }]
}
```

**Ответ:**
```json
{
    "error": {
        "name": "ValidationError",
        "message": "Request validation failed",
        "code": "VALIDATION_ERROR",
        "details": [
            {
                "instancePath": "/shops/0/address",
                "schemaPath": "#/properties/shops/items/properties/address/minLength",
                "keyword": "minLength",
                "params": {
                    "limit": 1
                },
                "message": "must NOT have fewer than 1 characters"
            }
        ]
    }
}
```
Поведение правильное

7.3 Создание нового магазина

Payload
```json
{
    "shops": [{
        "name": "Ювелирка",

        "address": "Калатушкина 13",

        "city": "Москва",

        "region": "Московская область",

        "schedule": {"Пн-пт": "8:00-17:00"},

        "latitude": 53.234,

        "longitude": 13.211
    }]
}
```

**Ответ:**
```json
{
    "data": {
        "shops": [
            {
                "guid": "6cc6ddd2-2792-407c-9e41-3370cd907608",
                "removalMark": false,
                "clientGuid": "1d73de89-bf34-4788-a067-718292cf73ec",
                "name": "Ювелирка",
                "address": "Калатушкина 13",
                "city": "Москва",
                "region": "Московская область",
                "schedule": {
                    "Пн-пт": "8:00-17:00"
                },
                "latitude": "53.23400000",
                "longitude": "13.21100000",
                "createdAt": "2025-12-07T05:01:42.626Z",
                "updatedAt": "2025-12-07T05:01:42.626Z"
            }
        ],
        "count": 1
    }
}
```
Поведение правильное

---

8. Добавление сувениров в магазин
POST. `http://91.186.196.211:3000/api/clients/v1/products`

8.1 Проверка на неверный guid магазина

Payload
```json
{
    "products": [{

        "shopGuid": "6cc6ddd2-2792-407c-9e41-3370cd123123",

        "name": "Дымковская игрушка",

        "price": "5000",

        "quantity": 50
    }]
}
```

**Ответ:**
```json
{
    "error": {
        "name": "NotFoundError",
        "message": "Shop",
        "code": "NOT_FOUND",
        "details": {
            "guid": "6cc6ddd2-2792-407c-9e41-3370cd123123"
        }
    }
}
```
Поведение правильное

8.2 Проверка формата цены сувенира

Payload
```json
{
    "products": [{

        "shopGuid": "6cc6ddd2-2792-407c-9e41-3370cd907608",

        "name": "Дымковская игрушка",

        "price": -241,

        "quantity": 50
    }]
}
```

**Ответ:**
```json
{
    "error": {
        "name": "ValidationError",
        "message": "Request validation failed",
        "code": "VALIDATION_ERROR",
        "details": [
            {
                "instancePath": "/products/0/price",
                "schemaPath": "#/properties/products/items/properties/price/minimum",
                "keyword": "minimum",
                "params": {
                    "comparison": ">=",
                    "limit": 0
                },
                "message": "must be >= 0"
            }
        ]
    }
}
```
Поведение правильное

8.3 Добавление сувенира в магазин

Payload
```json
{
    "products": [{
        "shopGuid": "6cc6ddd2-2792-407c-9e41-3370cd907608",

        "name": "Ткань",

        "price": 3500,

        "quantity": 23
    }]
}
```

**Ответ:**
```json
{
    "data": {
        "products": [
            {
                "guid": "cc6f2276-d81b-4192-873c-13a81db0a70f",
                "removalMark": false,
                "shopGuid": "6cc6ddd2-2792-407c-9e41-3370cd907608",
                "name": "Ткань",
                "price": "3500.00",
                "quantity": 23,
                "createdAt": "2025-12-07T06:01:07.949Z",
                "updatedAt": "2025-12-07T06:01:07.949Z"
            }
        ],
        "count": 1
    }
}
```
Поведение правильное

---

9. Создание атрибутов для продукта
POST. `http://91.186.196.211:3000/api/clients/v1/productAttributes`

9.1 Поля productGuid, type и value работают исправно

9.2 Создание атрибута для продукта

Payload
```json
{
    "productAttributes":[{
        "productGuid": "cc6f2276-d81b-4192-873c-13a81db0a70f",

        "type": "tag",

        "value": "handMade"
    }]
}
```

**Ответ:**
```json
{
    "data": {
        "productAttributes": [
            {
                "isCulture": false,
                "productGuid": "cc6f2276-d81b-4192-873c-13a81db0a70f",
                "type": "tag",
                "value": "handMade",
                "createdAt": "2025-12-07T06:04:25.569Z",
                "updatedAt": "2025-12-07T06:04:25.569Z"
            }
        ],
        "count": 1
    }
}
```
Поведение правильное

---

10. Избранное добавленных товаров
POST. `http://91.186.196.211:3000/api/favorites/v1`

10.1 Проверка добавления сувенира с некоректным Guid

Payload
```json
{
    "productGuid": "cc6f2276-d81b-4192-873c-1"
}
```

**Ответ:**
```json
{
    "error": {
        "name": "ValidationError",
        "message": "Request validation failed",
        "code": "VALIDATION_ERROR",
        "details": [
            {
                "instancePath": "/productGuid",
                "schemaPath": "#/properties/productGuid/format",
                "keyword": "format",
                "params": {
                    "format": "uuid"
                },
                "message": "must match format \"uuid\""
            }
        ]
    }
}
```
Поведение правильное

10.2 Добавление сувенира в избранное

Payload
```json
{
    "productGuid": "cc6f2276-d81b-4192-873c-13a81db0a70f"
}
```

**Ответ:**
```json
{
    "data": {
        "userGuid": "0f9802a0-902c-4058-a9bd-81d2b76bb5d4",
        "productGuid": "cc6f2276-d81b-4192-873c-13a81db0a70f",
        "updatedAt": "2025-12-07T06:15:25.583Z",
        "createdAt": "2025-12-07T06:15:25.583Z"
    }
}
```
Поведение правильное


---
